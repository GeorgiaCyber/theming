---

stages:
  - Build
    
build:
  stage: Build
  image: asciidoctor/docker-asciidoctor:latest
  tags:
    - docker
  script: |
    apk --update add grep
    grep -lR ':pdf-theme:' . | while read i;\
    do asciidoctor-pdf -a pdf-themesdir=./resources/themes\
    -a pdf-theme="./$(grep ':pdf-theme:' $i | awk '{print $2}').yml" ${i} -v; done  
  artifacts:
    paths:
      - ./*.pdf
      - ./*/*.pdf
      - ./*/*/*.pdf
    expire_in: 2 weeks



  